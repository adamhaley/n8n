{
  "name": "GOOKGG Amazon -> Katrin Sheet + Pipedrive",
  "nodes": [
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1CjimHlsXSjtOoxUjn_a_u45Y6xgEqbVn3aHq8wXq6NE",
          "mode": "list",
          "cachedResultName": "Katrin Buchk√§ufer mit Telefon bis 10.8.2024",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1CjimHlsXSjtOoxUjn_a_u45Y6xgEqbVn3aHq8wXq6NE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1696979597,
          "mode": "list",
          "cachedResultName": "export (1)",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1CjimHlsXSjtOoxUjn_a_u45Y6xgEqbVn3aHq8wXq6NE/edit#gid=1696979597"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Datum": "={{ $now.format('y-MM-d') }}",
            "Produkt": "Buch extern (zB Amazon)",
            "Zeit": "={{ $now.format('HH:mm') }}",
            "Nachname": "={{ $json.data.last_name }}",
            "Vorname": "={{ $json.data.first_name }}",
            "E-Mail": "={{ $json.data.email }}",
            "Telefonnr.": "={{ $('Webhook').item.json.body[0].phone }}",
            "Land": "={{ $('Webhook').item.json.body[0].ba_country }}",
            "Adresse": "={{ $('Webhook').item.json.body[0].ba_street }} {{ $('Webhook').item.json.body[0].ba_city }} {{ $('Webhook').item.json.body[0].ba_state }} {{ $('Webhook').item.json.body[0].ba_postal_code }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Datum",
              "displayName": "Datum",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Zeit",
              "displayName": "Zeit",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Produkt",
              "displayName": "Produkt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Anrede",
              "displayName": "Anrede",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Nachname",
              "displayName": "Nachname",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Vorname",
              "displayName": "Vorname",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "E-Mail",
              "displayName": "E-Mail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Telefonnr.",
              "displayName": "Telefonnr.",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Land",
              "displayName": "Land",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Katrin Anmerkung",
              "displayName": "Katrin Anmerkung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Adresse",
              "displayName": "Adresse",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "4,95",
              "displayName": "4,95",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "6,95",
              "displayName": "6,95",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        560,
        368
      ],
      "id": "4c0f1c2f-51f3-4346-94ef-75511f32e556",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "aIDyvQUuR4iZRmoo",
          "name": "Markus Longdragon Google Acct"
        }
      }
    },
    {
      "parameters": {
        "resource": "person",
        "name": "={{ $json.Vorname }} {{ $json.Nachname }} {{ $json.Adresse }}{{ $json.Land }} {{ $json.Datum }}",
        "additionalFields": {
          "email": [
            "={{ $json[\"E-Mail\"] }} "
          ],
          "phone": [
            "={{ $json[\"Telefonnr.\"] }} "
          ]
        }
      },
      "type": "n8n-nodes-base.pipedrive",
      "typeVersion": 1,
      "position": [
        784,
        368
      ],
      "id": "5f529997-f503-4cda-8339-65e23d60add4",
      "name": "Create a person",
      "credentials": {
        "pipedriveApi": {
          "id": "sqk78yrjAXyJsVVw",
          "name": "Pipedrive account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://qk7fee.eu-4.quentn.com/public/api/v1/contact",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {}
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n   \"contact\" : {\n      \"first_name\" : \"{{ $json.first_name }}\",\n      \"family_name\" : \"{{ $json.last_name }}\",\n      \"mail\" : \"{{$json.primary_email }}\",\t\n      \"request_ip\" : \"123.123.123.123\"\n   },\n   \"duplicate_check_method\" : \"email\",\n   \"duplicate_merge_method\" : \"update_add\",\n   \"return_fields\" : [\n      \"mail_status\",\"mail\",\"first_name\",\"family_name\"\n   ],\n   \"flood_limit\" : 5,\n   \"spam_protection\" : true\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1008,
        368
      ],
      "id": "a220dde3-94ad-4a8b-99db-27fd7b20160a",
      "name": "Post to Quentn1",
      "credentials": {
        "httpBearerAuth": {
          "id": "gBPFMcYMVNcGZUkz",
          "name": "Quentn Bearer Auth"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://markusdan.com/wp-json/opm-api/v1/members",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpQueryAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "email",
              "value": "test@test.com"
            },
            {
              "name": "first_name",
              "value": "test"
            },
            {
              "name": "last_name",
              "value": "test"
            },
            {
              "name": "memberships",
              "value": "1"
            },
            {
              "name": "notify",
              "value": "1"
            },
            {
              "name": "opm_api_key",
              "value": "2611829e90d5b0bb61204ccab16913fa074db7051043badabeb3d0688d566a32"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        336,
        368
      ],
      "id": "76d56700-16ce-46c1-811e-8dd3dd9a24ff",
      "name": "POST To MarkusDan.com Members",
      "credentials": {
        "httpQueryAuth": {
          "id": "ISBD5w0SgPqx0Sfz",
          "name": "MarkusDan.com Auth"
        }
      }
    },
    {
      "parameters": {
        "content": "## Receive Webhook POST from Quentn\n\n[Unbenanntes Element (DEH Buchfunnel)]",
        "height": 416,
        "width": 256,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        224
      ],
      "id": "bae6397c-7bbc-4ecb-b37b-81b7bbebec17",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "12d976d8-c8fa-4acc-86f4-d6766f86c644",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        112,
        368
      ],
      "id": "07df2488-c076-478e-b694-65fad61821ad",
      "name": "Webhook",
      "webhookId": "12d976d8-c8fa-4acc-86f4-d6766f86c644"
    },
    {
      "parameters": {
        "content": "## POST to MarkusDan.com endpoint",
        "height": 416,
        "width": 224
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        272,
        224
      ],
      "id": "5080f62c-10eb-46e3-a276-974f974af6e6",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Append to Katrin Google Sheet\n",
        "height": 416,
        "width": 208,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        512,
        224
      ],
      "id": "b09deede-97c5-40bc-897d-0b17db7c56e8",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Add Person to Pipedrive\n",
        "height": 416,
        "width": 208,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        736,
        224
      ],
      "id": "6c10cfe7-1508-4113-9494-82cb503ded64",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## POST Add contact to Quentn",
        "height": 416,
        "width": 224,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        960,
        224
      ],
      "id": "ded7344d-4d92-4fc4-934b-0c183a2cc819",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## GOOKGG Amazon -> Katrin Sheet + Pipedrive",
        "width": 736,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "b9f9893b-01d0-41ec-a9c4-385679e3ea22",
      "name": "Sticky Note5"
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "n8n.megyk.com",
            "user-agent": "Drupal (+http://drupal.org/)",
            "content-length": "230",
            "content-type": "application/json",
            "via": "1.0 Caddy",
            "x-forwarded-for": "176.9.50.181",
            "x-forwarded-host": "n8n.megyk.com",
            "x-forwarded-proto": "https",
            "x-quentn-hmac-sha256": "j4eqc2T0oqvGjUq5wSbQPeRE1Bf6bQUUt81E1ofOflM=",
            "accept-encoding": "gzip"
          },
          "params": {},
          "query": {},
          "body": [
            {
              "title": "",
              "first_name": "TEST 2",
              "family_name": "TEST 2",
              "company": "",
              "job_title": "",
              "mail": "test@adamhaley.com",
              "website": "",
              "phone": "",
              "ba_street": "",
              "ba_city": "",
              "ba_postal_code": "",
              "ba_state": "",
              "ba_country": "",
              "id": "62535"
            }
          ],
          "webhookUrl": "https://n8n.megyk.com/webhook-test/12d976d8-c8fa-4acc-86f4-d6766f86c644",
          "executionMode": "test"
        }
      }
    ]
  },
  "connections": {
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Create a person",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a person": {
      "main": [
        [
          {
            "node": "Post to Quentn1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "POST To MarkusDan.com Members": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "POST To MarkusDan.com Members",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "9247dd1d-cde7-42de-877a-ba813d9a7a84",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9eba4434b08a3b38c7a52d54228c736501f146e2a8d1b314568ff999759dcb0e"
  },
  "id": "0mupmIyBMc9Mic8o",
  "tags": []
}